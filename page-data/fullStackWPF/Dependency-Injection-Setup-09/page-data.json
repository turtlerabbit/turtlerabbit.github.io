{"componentChunkName":"component---src-templates-archive-post-js","path":"/fullStackWPF/Dependency-Injection-Setup-09/","result":{"data":{"mdx":{"id":"8edec8a9-606b-582d-8396-537c3e94ff7f","excerpt":"기본 제공 종속성 주입 .NET Core package를 사용하여 종속성 주입을 설정했다. 종속성 주입의 이점과 서비스를 singleton, scoped 또는 transient…","frontmatter":{"title":"FULL STACK WFP 09 - Dependency Injection Setup","date":"May 12, 2021","tag":"WPF, FullStack, Dependency Injection, DI, singleton, scoped, transient"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"FULL STACK WFP 09 - Dependency Injection Setup\",\n  \"date\": \"2021-05-12 09\",\n  \"tag\": \"WPF, FullStack, Dependency Injection, DI, singleton, scoped, transient\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", null), mdx(\"p\", null, \"\\uAE30\\uBCF8 \\uC81C\\uACF5 \\uC885\\uC18D\\uC131 \\uC8FC\\uC785 .NET Core package\\uB97C \\uC0AC\\uC6A9\\uD558\\uC5EC \\uC885\\uC18D\\uC131 \\uC8FC\\uC785\\uC744 \\uC124\\uC815\\uD588\\uB2E4.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"\\uC885\\uC18D\\uC131 \\uC8FC\\uC785\\uC758 \\uC774\\uC810\\uACFC \\uC11C\\uBE44\\uC2A4\\uB97C singleton, scoped \\uB610\\uB294 transient(\\uC784\\uC2DC)\\uB85C \\uB4F1\\uB85D\\uD558\\uB294 \\uAC83\\uC758 \\uCC28\\uC774\\uC810\\uC5D0 \\uB300\\uD574 \\uC124\\uBA85\\uD55C\\uB2E4.\\n\\uB610\\uD55C \\uBDF0 \\uBAA8\\uB378 \\uC0DD\\uC131\\uC744 \\uD329\\uD1A0\\uB9AC\\uB85C \\uB9AC\\uD329\\uD130\\uB9C1\\uD558\\uC5EC \\uC560\\uD50C\\uB9AC\\uCF00\\uC774\\uC158\\uC758 \\uBDF0 \\uBAA8\\uB378\\uC5D0 \\uB300\\uD55C \\uBAA8\\uB4E0 \\uC885\\uC18D\\uC131\\uC774 \\uC885\\uC18D\\uC131 \\uC8FC\\uC785 \\uCEE8\\uD14C\\uC774\\uB108\\uC5D0\\uC11C \\uD574\\uACB0\\uB418\\uB3C4\\uB85D\\uD55C\\uB2E4.\"), mdx(\"h1\", null), mdx(\"h3\", null, \"1. Setup dependency injection.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"We want the dependency injection container to automatically create all the services.   \"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Give us services with dependencies already passed in.   \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Define all application dependencies in one isolated plasce. (the dependecny injection container)   \"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / App.xaml.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"protected override void OnStartup(StartupEventArgs e)\\n{\\n    // Don't pass around your IServiceProvider!\\n    IServiceProvider serviceProvider = CreateServiceProvider();\\n\\n    Window window = new MainWindow();\\n    Window window = serviceProvider.GetRequiredService<MainViewModel>();\\n    window.Show();\\n\\n    base.OnStartup(e); \\n}\\n\\nprivate IServiceProvider CreateServiceProvider()\\n{\\n    IServiceCollection services = new ServiceCollection();\\n\\n    // 1. Singleton - one instance per application\\n    // 2. Transient - different instance everytime\\n    // 3. Scoped - one instance per \\\"scope\\\"\\n\\n    services.AddSingleton<SimpleTraderDbContextFactory>(); \\n    // we do not depend on that interface anywhere.\\n    services.AddSingleton<IDataService<Account>, AccountDataService>();\\n    services.AddSingleton<IStockPriceService, StockPriceService>();\\n    services.AddSingleton<IBuyStockService, BuyStockService>();\\n\\n    services.AddScoped<INavigator, Navigator>();  // MainViewModel.cs \\uC218\\uC815\\n    services.AddScoped<MainViewModel>();\\n\\n    return services.BuildServiceProvider();\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / ViewModels / MainViewModel.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public class MainViewModel : ViewModelBase\\n{\\n    public INavigator Navigator { get; set; }\\n\\n    public MainViewModel(INavigator navigator)\\n    {\\n        Navigator = navigator;\\n\\n        Navigator.UpdateCurrentViewModelCommand.Execute(ViewType.Home);\\n    }\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / ViewModels / Factories / ISimpleTraderViewModelAbstractFactory.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public interface ISimpleTraderViewModelAbstractFactory\\n{\\n    ViewModelBase CreateViewModel(ViewType viewType);\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / ViewModels / Factories / SimpleTraderViewModelAbstractFactory.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public class SimpleTraderViewModelAbstractFactory : \\n    ISimpleTraderViewModelAbstractFactory\\n{\\n    public ViewModelBase CreateViewModel(ViewType viewType)\\n    {\\n        switch (viewType)\\n        {\\n            case ViewType.Home:\\n                return new HomeViewModel(\\n                    MajorIndexListingViewModel.LoadMajorIndexViewModel(\\n                        new MajorIndexService()));\\n            case ViewType.Portfolio:\\n                return new PortfolioViewModel();\\n            default:\\n                throw new ArgumentException(\\n                    \\\"The ViewType does not have a ViewModel.\\\", \\\"viewType\\\");\\n        }\\n    }\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / ViewModels / Factories / ISimpleTraderViewModelFactory.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public interface ISimpleTraderViewModelFactory<T> where T : ViewModelBase\\n{\\n    T CreateViewModel();\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / ViewModels / Factories / HomeViewModelFactory.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public class HomeViewModelFactory : ISimpleTraderViewModelFactory<HomeViewModel>\\n{\\n    private readonly ISimpleTraderViewModelFactory<MajorIndexListingViewModel> \\n        _majorIndexViewModelFactory;\\n\\n    public HomeViewModelFactory(\\n        ISimpleTraderViewModelFactory<MajorIndexListingViewModel> \\n            majorIndexViewModelFactory)\\n    {\\n        _majorIndexViewModelFactory = majorIndexViewModelFactory;\\n    }\\n\\n    public HomeViewModel CreateViewModel()\\n    {\\n        return new HomeViewModel(_majorIndexViewModelFactory.CreateViewModel());\\n    }\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / ViewModels / Factories / MajorIndexListingViewModelFactory.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public class MajorIndexListingViewModelFactory : \\n    ISimpleTraderViewModelFactory<MajorIndexListingViewModel>\\n{\\n    private readonly IMajorIndexService _majorIndexService;\\n\\n    public MajorIndexListingViewModelFactory(IMajorIndexService majorIndexService)\\n    {\\n        _majorIndexService = majorIndexService;\\n    }\\n\\n    public MajorIndexListingViewModel CreateViewModel()\\n    {\\n        return MajorIndexListingViewModel.LoadMajorIndexViewModel(_majorIndexService);\\n    }\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / ViewModels / Factories / SimpleTraderViewModelAbstractFactory.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public class SimpleTraderViewModelAbstractFactory : \\n    ISimpleTraderViewModelAbstractFactory\\n{\\n    private readonly ISimpleTraderViewModelFactory<HomeViewModel> \\n        _homeViewModelFactory;\\n    private readonly ISimpleTraderViewModelFactory<PortfolioViewModel> \\n        _portfolioViewModelFactory;\\n\\n    public SimpleTraderViewModelAbstractFactory(\\n        ISimpleTraderViewModelFactory<HomeViewModel> homeViewModelFactory, \\n        ISimpleTraderViewModelFactory<PortfolioViewModel> portfolioViewModelFactory)\\n    {\\n        _homeViewModelFactory = homeViewModelFactory;\\n        _portfolioViewModelFactory = portfolioViewModelFactory;\\n    }\\n\\n    public ViewModelBase CreateViewModel(ViewType viewType)\\n    {\\n        switch (viewType)\\n        {\\n            case ViewType.Home:\\n                return _homeViewModelFactory.CreateViewModel();\\n            case ViewType.Portfolio:\\n                return _portfolioViewModelFactory.CreateViewModel();\\n            default:\\n                throw new ArgumentException(\\n                    \\\"The ViewType does not have a ViewModel.\\\", \\\"viewType\\\");\\n        }\\n    }\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / ViewModels / Factories / PortfolioViewModelFactory.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public class PortfolioViewModelFactory : \\n    ISimpleTraderViewModelFactory<PortfolioViewModel>\\n{\\n    public PortfolioViewModel CreateViewModel()\\n    {\\n        return new PortfolioViewModel();\\n    }\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / App.xaml.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"protected override void OnStartup(StartupEventArgs e)\\n{\\n    // Don't pass around your IServiceProvider!\\n    IServiceProvider serviceProvider = CreateServiceProvider();\\n\\n    Window window = new MainWindow();\\n    Window window = serviceProvider.GetRequiredService<MainViewModel>();\\n    window.Show();\\n\\n    base.OnStartup(e); \\n}\\n\\nprivate IServiceProvider CreateServiceProvider()\\n{\\n    IServiceCollection services = new ServiceCollection();\\n\\n    // 1. Singleton - one instance per application\\n    // 2. Transient - different instance everytime\\n    // 3. Scoped - one instance per \\\"scope\\\"\\n\\n    services.AddSingleton<SimpleTraderDbContextFactory>(); \\n    // we do not depend on that interface anywhere.\\n    services.AddSingleton<IDataService<Account>, AccountDataService>();\\n    services.AddSingleton<IStockPriceService, StockPriceService>();\\n    services.AddSingleton<IBuyStockService, BuyStockService>();\\n\\n    // \\uCD94\\uAC00\\n    services.AddSingleton<IMajorIndexService, MajorIndexService>();\\n\\n    services.AddSingleton<ISimpleTraderViewModelAbstractFactory, \\n        SimpleTraderViewModelAbstractFactory>();\\n    services.AddSingleton<ISimpleTraderViewModelFactory<HomeViewModel>, \\n        HomeViewModelFactory>();\\n    services.AddSingleton<ISimpleTraderViewModelFactory<PortfolioViewModel>, \\n        PortfolioViewModelFactory>();\\n    services.AddSingleton<ISimpleTraderViewModelFactory<\\n        MajorIndexListingViewModel>, MajorIndexListingViewModelFactory>();\\n    // \\uCD94\\uAC00 \\uC644\\uB8CC\\n\\n    services.AddScoped<INavigator, Navigator>();  // MainViewModel.cs \\uC218\\uC815\\n    services.AddScoped<MainViewModel>();\\n\\n    return services.BuildServiceProvider();\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / Commands / UpdateCurrentViewModelCommand.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public class UpdateCurrentViewModelCommand : ICommand\\n{\\n    public event EventHandler CanExecuteChanged;\\n\\n    private readonly INavigator _navigator;\\n    private readonly ISimpleTraderViewModelAbstractFactory _viewModelFactory;\\n\\n    public UpdateCurrentViewModelCommand(INavigator navigator, \\n        ISimpleTraderViewModelAbstractFactory viewModelFactory)\\n    {\\n        _navigator = navigator;\\n        _viewModelFactory = viewModelFactory;\\n    }\\n\\n    public bool CanExecute(object parameter)\\n    {\\n        return true;\\n    }\\n\\n    public void Execute(object parameter)\\n    {\\n        if (parameter is ViewType)\\n        {\\n            ViewType viewType = (ViewType)parameter;\\n\\n            _navigator.CurrentViewModel = _viewModelFactory.CreateViewModel(viewType);\\n        }\\n    }\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / State / Navigators\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public class Navigator : ObservableObject, INavigator\\n{\\n    private ViewModelBase _currentViewModel;\\n    public ViewModelBase CurrentViewModel\\n    {\\n        get\\n        {\\n            return _currentViewModel;\\n        }\\n        set\\n        {\\n            _currentViewModel = value;\\n            OnPropertyChanged(nameof(CurrentViewModel));\\n        }\\n    }\\n\\n    public ICommand UpdateCurrentViewModelCommand { get; set; }\\n\\n    public Navigator(ISimpleTraderViewModelAbstractFactory viewModelFactory)\\n    {\\n        UpdateCurrentViewModelCommand = \\n            new UpdateCurrentViewModelCommand(this, viewModelFactory);\\n    }\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / MainWindow.xaml.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public partial class MainWindow : Window\\n{\\n    public MainWindow(object dataContext)\\n    {\\n        InitializeComponent();\\n\\n        DataContext = dataContext;\\n    }\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / App.xaml.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"protected override void OnStartup(StartupEventArgs e)\\n{\\n    // Don't pass around your IServiceProvider!\\n    IServiceProvider serviceProvider = CreateServiceProvider();\\n\\n    // \\uC218\\uC815 \\uC644\\uB8CC\\n    Window window = serviceProvider.GetRequiredService<MainWindow>();\\n    window.Show();\\n\\n    base.OnStartup(e); \\n}\\n\\nprivate IServiceProvider CreateServiceProvider()\\n{\\n    IServiceCollection services = new ServiceCollection();\\n\\n    // 1. Singleton - one instance per application\\n    // 2. Transient - different instance everytime\\n    // 3. Scoped - one instance per \\\"scope\\\"\\n\\n    services.AddSingleton<SimpleTraderDbContextFactory>(); \\n    // we do not depend on that interface anywhere.\\n    services.AddSingleton<IDataService<Account>, AccountDataService>();\\n    services.AddSingleton<IStockPriceService, StockPriceService>();\\n    services.AddSingleton<IBuyStockService, BuyStockService>();\\n    services.AddSingleton<IMajorIndexService, MajorIndexService>();\\n\\n    services.AddSingleton<ISimpleTraderViewModelAbstractFactory, \\n        SimpleTraderViewModelAbstractFactory>();\\n    services.AddSingleton<ISimpleTraderViewModelFactory<HomeViewModel>, \\n        HomeViewModelFactory>();\\n    services.AddSingleton<ISimpleTraderViewModelFactory<PortfolioViewModel>, \\n        PortfolioViewModelFactory>();\\n    services.AddSingleton<ISimpleTraderViewModelFactory<\\n        MajorIndexListingViewModel>, MajorIndexListingViewModelFactory>();\\n\\n    services.AddScoped<INavigator, Navigator>(); \\n    services.AddScoped<MainViewModel>();\\n\\n    // \\uC218\\uC815\\n    // We can't just resolve the MainViewModel automatically\\n    // because the MainWindow constructor takes an \\\"object\\\"\\n    services.AddScoped<MainWindow>(\\n        s => new MainWindow(s.GetRequiredService<MainViewModel>()));\\n\\n    return services.BuildServiceProvider();\\n}\\n\")))));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"slug":"/fullStackWPF/Dependency-Injection-Setup-09/","previous":{"id":"9775fc7b-02fa-5258-87a7-ebdd6fe98c5f","fields":{"slug":"/fullStackWPF/Inserting-User-Data-with-Entity-Framework-Core-08/"},"frontmatter":{"title":"FULL STACK WFP 08 - Inserting User Data with Entity Framework Core"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"FULL STACK WFP 08 - Inserting User Data with Entity Framework Core\",\n  \"date\": \"2021-05-12 08\",\n  \"tag\": \"WPF, FullStack, Refactoring\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", null), mdx(\"p\", null, \"\\uACC4\\uC815(accounts)\\uC5D0\\uC11C \\uC8FC\\uC2DD\\uC744 \\uAD6C\\uB9E4\\uD560 \\uC218\\uC788\\uB294 IBuyStockService\\uB97C \\uB9CC\\uB4E0\\uB2E4.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"\\uC774 \\uC11C\\uBE44\\uC2A4\\uB294 \\uC774\\uC804 \\uC5D0\\uD53C\\uC18C\\uB4DC\\uC5D0\\uC11C \\uC0DD\\uC131 \\uB41C \\uACC4\\uC815\\uC758 IStockPriceService \\uBC0F IDataService\\uB97C \\uC0AC\\uC6A9\\uD55C\\uB2E4.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"\\uB610\\uD55C Entity Framework \\uD0D0\\uC0C9 \\uC18D\\uC131\\uC5D0 \\uBB38\\uC81C\\uAC00 \\uBC1C\\uC0DD\\uD558\\uBBC0\\uB85C \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4\\uC640 \\uD1B5\\uC2E0\\uD558\\uB294 GenericDataService\\uB97C \\uB9AC\\uD329\\uD130\\uB9C1\\uD558\\uACE0 AccountDataService\\uB97C \\uB9CC\\uB4E4\\uC5B4\\uC57C\\uD55C\\uB2E4.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"AccountDataService\\uB294 AssetTransactions\\uC640 \\uAC19\\uC740 \\uACC4\\uC815\\uACFC \\uAD00\\uB828\\uB41C \\uC815\\uBCF4\\uB97C \\uCFFC\\uB9AC\\uD558\\uB3C4\\uB85D Entity Framework\\uC5D0 \\uBA85\\uC2DC\\uC801\\uC73C\\uB85C \\uC9C0\\uC2DC\\uD55C\\uB2E4.\"), mdx(\"h1\", null), mdx(\"h3\", null, \"1. Create a IBuyStockService that allows accounts to purchase stocks.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.Domain / Services / /TransactionServices / IBuyStockService.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public interface IBuyStockService\\n{\\n    Task<Account> BuyStock(Account buyer, string stock, int shares);\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.Domain / Services / /TransactionServices / BuyStockService.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public class BuyStockService : IBuyStockService\\n{\\n    private readonly IStockPriceService _stockPriceService;\\n    private readonly IDataService<Account> _accountService;\\n\\n    public BuyStockService(IStockPriceService stockPriceService, \\n        IDataService<Account> accountService)\\n    {\\n        _stockPriceService = stockPriceService;\\n        _accountService = accountService;\\n    }\\n\\n    public async Task<Account> BuyStock(Account buyer, string symbol, int shares)\\n    {\\n        double stockPrice = await _stockPriceService.GetPrice(symbol);\\n        double transactionPrice = stockPrice * shares;\\n\\n        if (transactionPrice > buyer.Balance)\\n        {\\n            throw new InsufficientFundsException(buyer.Balance, transactionPrice);\\n        }\\n\\n        AssetTransaction transaction = new AssetTransaction()\\n        {\\n            Account = buyer,\\n            Asset = new Asset()\\n            {\\n                pricePerShare = stockPrice,\\n                Symbol = symbol\\n            },\\n            DateProcessed = DateTime.Now,\\n            Shares = shares,\\n            IsPurchase = true\\n        };\\n\\n        buyer.AssetTransactions.Add(transaction); \\n        // Account.cs \\uC218\\uC815 => Add() \\uC0AC\\uC6A9\\uD558\\uAE30 \\uC704\\uD574\\n        // IEnumerable<AssetTransaction> AssetTransactions {get; set;} =>\\n        // ICollection<AssetTransaction> AssetTransactions {get; set;}\\n\\n        buyer.Balance -= transactionPrice;\\n\\n        await _accountService.Update(buyer.Id, buyer);\\n\\n        return buyer;\\n    }\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.Domain / Exceptions / InsufficientFundsException.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public class InsufficientFundsException : Exception\\n{\\n    public double AccountBalance { get; set; }\\n    public double RequiredBalance { get; set; }\\n\\n    public InsufficientFundsException(double accountBalance, double requiredBalance)\\n    {\\n        AccountBalance = accountBalance;\\n        RequiredBalance = requiredBalance;\\n    }\\n\\n    public InsufficientFundsException(double accountBalance, \\n        double requiredBalance, string message) : base(message)\\n    {\\n        AccountBalance = accountBalance;\\n        RequiredBalance = requiredBalance;\\n    }\\n\\n    public InsufficientFundsException(double accountBalance, \\n        double requiredBalance, string message, Exception innerException) \\n            : base(message, innerException)\\n    {\\n        AccountBalance = accountBalance;\\n        RequiredBalance = requiredBalance;\\n    }\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / App.xaml.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"IDataService<Account> accountService = \\n        new GenericDataServices<Account>(\\n            new EntityFramework.SimpleTraderDbContextFactory());\\nIStockPriceService stockPriceService = \\n        new StockPriceService();\\nIBuyStockService buyStockService = \\n        new BuyStockService(stockPriceService, accountService);\\n\\nAccount buyer = await accountService.Get(1);\\n\\nawait buyStockService.BuyStock(buyer, \\\"T\\\", 5); // => \\uC5D0\\uB7EC \\uBC1C\\uC0DD\\n// Entity Framework \\uD0D0\\uC0C9 \\uC18D\\uC131\\uC5D0 \\uBB38\\uC81C\\uAC00 \\uBC1C\\uC0DD\\uD558\\uBBC0\\uB85C \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4\\uC640 \\uD1B5\\uC2E0\\uD558\\uB294 \\n// GenericDataService\\uB97C \\uB9AC\\uD329\\uD130\\uB9C1\\uD558\\uACE0 AccountDataService\\uB97C \\uB9CC\\uB4E4\\uC5B4\\uC57C\\uD55C\\uB2E4.\\n// AccountDataService\\uB294 AssetTransactions\\uC640 \\uAC19\\uC740 \\uACC4\\uC815\\uACFC \\uAD00\\uB828\\uB41C \\uC815\\uBCF4\\uB97C \\uCFFC\\uB9AC\\uD558\\uB3C4\\uB85D \\n// Entity Framework\\uC5D0 \\uBA85\\uC2DC\\uC801\\uC73C\\uB85C \\uC9C0\\uC2DC\\uD55C\\uB2E4.\\n\\nWindow window = new MainWindow();\\n...\\n\")))), mdx(\"h1\", null), mdx(\"h3\", null, \"2. GenericDataService\\uB97C \\uB9AC\\uD329\\uD130\\uB9C1\\uD558\\uACE0 AccountDataService\\uB97C \\uB9CC\\uB4E0\\uB2E4.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.EntityFramework / Services / AccountDataService.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public class AccountDataService : IDataService<Account>\\n{\\n    private readonly SimpleTraderDbContextFactory _contextFactory;\\n    private readonly NonQueryDataService<Account> _nonQueryDataService;\\n\\n    public AccountDataService(SimpleTraderDbContextFactory contextFactory)\\n    {\\n        _contextFactory = contextFactory;\\n        _nonQueryDataService = new NonQueryDataService<Account>(contextFactory);\\n    }\\n\\n    public async Task<Account> Create(Account entity)\\n    {\\n        return await _nonQueryDataService.Create(entity);\\n    }\\n\\n    public async Task<bool> Delete(int id)\\n    {\\n        return await _nonQueryDataService.Delete(id);\\n    }\\n\\n    public async Task<Account> Get(int id)\\n    {\\n        using (SimpleTraderDbContext context = _contextFactory.CreateDbContext())\\n        {\\n            Account entity = await context\\n                .Accounts  // \\uC218\\uC815\\uB428.\\n                .Include(a => a.AssetTransactions) // \\uC218\\uC815\\uB428.\\n                .FirstOrDefaultAsync((e) => e.Id == id);\\n\\n            return entity;\\n        }\\n    }\\n\\n    public async Task<IEnumerable<Account>> GetAll()\\n    {\\n        using (SimpleTraderDbContext context = _contextFactory.CreateDbContext())\\n        {\\n            IEnumerable<Account> entities = await context\\n                .Accounts.Include(a => a.AssetTransactions) \\n                .ToListAsync();\\n\\n            return entities;\\n        }\\n    }\\n\\n    public async Task<Account> Update(int id, Account entity)\\n    {\\n        return await _nonQueryDataService.Update(id, entity);\\n    }\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.EntityFramework / Services / Common / NonQueryDataService.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public class NonQueryDataService<T> where T : DomainObject\\n{\\n    private readonly SimpleTraderDbContextFactory _contextFactory;\\n\\n    public NonQueryDataService(SimpleTraderDbContextFactory contextFactory)\\n    {\\n        _contextFactory = contextFactory;\\n    }\\n\\n    public async Task<T> Create(T entity)\\n    {\\n        using (SimpleTraderDbContext context = _contextFactory.CreateDbContext())\\n        {\\n            EntityEntry<T> createdResult = await context.Set<T>().AddAsync(entity);\\n            await context.SaveChangesAsync();\\n\\n            return createdResult.Entity;\\n        }\\n    }\\n\\n    public async Task<bool> Delete(int id)\\n    {\\n        using (SimpleTraderDbContext context = _contextFactory.CreateDbContext())\\n        {\\n            T entity = await context.Set<T>().FirstOrDefaultAsync((e) => e.Id == id);\\n            context.Set<T>().Remove(entity);\\n            await context.SaveChangesAsync();\\n\\n            return true;\\n        }\\n    }\\n\\n    public async Task<T> Update(int id, T entity)\\n    {\\n        using (SimpleTraderDbContext context = _contextFactory.CreateDbContext())\\n        {\\n            entity.Id = id;\\n\\n            context.Set<T>().Update(entity);\\n            await context.SaveChangesAsync();\\n\\n            return entity;\\n        }\\n    }\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.EntityFramework / Services / GenericDataServices.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public class GenericDataServices<T> : IDataService<T> where T : DomainObject\\n{\\n    private readonly SimpleTraderDbContextFactory _contextFactory;\\n    private readonly NonQueryDataService<T> _nonQueryDataService;\\n\\n    public GenericDataServices(SimpleTraderDbContextFactory contextFactory)\\n    {\\n        _contextFactory = contextFactory;\\n        _nonQueryDataService = new NonQueryDataService<T>(contextFactory);\\n    }\\n\\n    public async Task<T> Create(T entity)\\n    {\\n        return await _nonQueryDataService.Create(entity);\\n    }\\n\\n    public async Task<bool> Delete(int id)\\n    {\\n        return await _nonQueryDataService.Delete(id);\\n    }\\n\\n    public async Task<T> Get(int id)\\n    {\\n        using (SimpleTraderDbContext context = _contextFactory.CreateDbContext())\\n        {\\n            T entity = await context.Set<T>().FirstOrDefaultAsync((e) => e.Id == id);\\n\\n            return entity;\\n        }\\n    }\\n\\n    public async Task<IEnumerable<T>> GetAll()\\n    {\\n        using (SimpleTraderDbContext context = _contextFactory.CreateDbContext())\\n        {\\n            IEnumerable<T> entities = await context.Set<T>().ToListAsync();\\n\\n            return entities;\\n        }\\n    }\\n\\n    public async Task<T> Update(int id, T entity)\\n    {\\n        return await _nonQueryDataService.Update(id, entity);\\n    }\\n}\\n\")))));\n}\n;\nMDXContent.isMDXComponent = true;"},"next":{"id":"4442859d-ef21-579e-93b5-46650e251023","fields":{"slug":"/fullStackWPF/Creating-the-ViewModel-and-View-for-Buying-Stocks-10/"},"frontmatter":{"title":"FULL STACK WFP 10 - Creating the ViewModel and View for Buying Stocks"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"FULL STACK WFP 10 - Creating the ViewModel and View for Buying Stocks\",\n  \"date\": \"2021-05-12 10\",\n  \"tag\": \"WPF, FullStack, State\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", null), mdx(\"p\", null, \"\\uC2DC\\uB9AC\\uC988\\uC758 \\uC55E\\uBD80\\uBD84\\uC5D0 \\uC788\\uB294 BuyStockService\\uB97C \\uC0AC\\uC6A9\\uD558\\uC5EC BuyViewModel \\uBC0F BuyView\\uB97C \\uB9CC\\uB4E0\\uB2E4.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"BuyViewModel\\uC740 \\uC560\\uD50C\\uB9AC\\uCF00\\uC774\\uC158 \\uC804\\uCCB4\\uC5D0\\uC11C \\uC0C1\\uD0DC\\uAC00 \\uC720\\uC9C0\\uB418\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uB2E4\\uB978 \\uBDF0 \\uBAA8\\uB378\\uACFC \\uB2E4\\uB974\\uB2E4.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"BuyViewModel \\uBC0F BuyView\\uC5D0 \\uAE30\\uBCF8 \\uAE30\\uB2A5\\uC744 \\uCD94\\uAC00\\uD588\\uC9C0\\uB9CC \\uBDF0 \\uBAA8\\uB378\\uC5D0\\uB294 stock \\uC815\\uBCF4\\uB97C \\uC5BB\\uAE30\\uC704\\uD55C \\uC0C8\\uB85C\\uC6B4 \\uC11C\\uBE44\\uC2A4\\uAC00 \\uD544\\uC694\\uD558\\uBA70 \\uBDF0\\uB97C \\uAC1C\\uC120\\uD574\\uC57C\\uD55C\\uB2E4.\"), mdx(\"h1\", null), mdx(\"h3\", null, \"1. Create the BuyViewModel and BuyView\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / ViewModels / BuyViewModel.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public class BuyViewModel : ViewModelBase\\n{\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / Views / BuyView.xaml\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"<Grid>\\n    <TextBlock Text=\\\"Buy Stocks\\\" />\\n</Grid>\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / App.xaml\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"<ResourceDictionary>\\n        ...\\n\\n        <DataTemplate DataType=\\\"{x:Type viewmodels:BuyViewModel}\\\">\\n            <views:BuyView />\\n        </DataTemplate>\\n    </ResourceDictionary>\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / ViewModels / Factories / SimpleTraderViewModelAbstractFactory.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"switch (viewType)\\n{\\n    case ViewType.Home:\\n        return _homeViewModelFactory.CreateViewModel();\\n    case ViewType.Portfolio:\\n        return _portfolioViewModelFactory.CreateViewModel();\\n        // \\uCD94\\uAC00\\n    case ViewType.Buy:\\n        return new BuyViewModel();\\n    ...\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / State / Navigators / INavigator.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public enum ViewType\\n{\\n    Home,\\n    Portfolio,\\n    Buy\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / Controls / NavigationBar.xaml\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"...\\n<RadioButton Grid.Column=\\\"2\\\" Content=\\\"Buy\\\"\\n            Command=\\\"{Binding UpdateCurrentViewModelCommand}\\\"\\n            IsChecked=\\\"{Binding CurrentViewModel, Mode=OneWay,\\n                        Converter={StaticResource EqualValueToParameterConverter},\\n                        ConverterParameter={x:Type vm:BuyViewModel}}\\\"\\n            CommandParameter=\\\"{x:Static nav:ViewType.Buy}\\\" />\\n<RadioButton Grid.Column=\\\"3\\\" Content=\\\"Sell\\\" />\\n\")))), mdx(\"h1\", null), mdx(\"h3\", null, \"2. BuyViewModel\\u2019s state is persisted throughout the application\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"BuyViewModel\\uC740 \\uBAA8\\uB4E0 \\uC815\\uBCF4\\uB97C \\uC783\\uC5B4 \\uBC84\\uB9B4 \\uD544\\uC694\\uAC00 \\uC5C6\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uAE30\\uBCF8\\uC801\\uC73C\\uB85C \\uBAA8\\uB4E0 \\uC0C1\\uD0DC\\uB97C \\uC720\\uC9C0 \\uD55C\\uB2E4.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"\\uB2E4\\uB978 view\\uC5D0\\uC11C \\uC804\\uD658\\uD574\\uC11C \\uB2E4\\uC2DC \\uB3CC\\uC544 \\uC654\\uC744 \\uB54C BuyViewModel\\uC740 \\uBAA8\\uB4E0 \\uAC83\\uC774 \\uC5EC\\uC804\\uD788 \\uC874\\uC7AC\\uD558\\uBBC0\\uB85C \\uC2E4\\uC81C\\uB85C\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"factory\\uB97C \\uB9CC\\uB4E4\\uC9C0 \\uC54A\\uACE0 \\uC2E4\\uC81C\\uB85C \\uC0DD\\uC131\\uC790(constructor)\\uB97C \\uD1B5\\uD574 \\uBDF0 \\uBAA8\\uB378\\uC744 \\uC804\\uB2EC\\uD558\\uACE0 \\uC774 \\uBDF0 \\uBAA8\\uB378\\uC740 \\uC0C8 \\uC0C1\\uD0DC\\uB97C \\uB9CC\\uB4E4\\uC9C0 \\uC54A\\uC744 \\uBAA8\\uB4E0 \\uC0C1\\uD0DC\\uB97C \\uC720\\uC9C0\\uD55C\\uB2E4.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"BuyViewModel\\uC740 \\uAE30\\uBCF8\\uC801\\uC73C\\uB85C \\uC560\\uD50C\\uB9AC\\uCF00\\uC774\\uC158 \\uAE30\\uAC04 \\uB3D9\\uC548 \\uB3D9\\uC77C\\uD55C \\uC778\\uC2A4\\uD134\\uC2A4\\uAC00 \\uB420 \\uAC83\\uC774\\uB2E4.\\n\\uADF8\\uB798\\uC11C \\uD574\\uC57C \\uD560 \\uC77C\\uC740 \\uC885\\uC18D\\uC131 \\uC8FC\\uC785 \\uCEE8\\uD14C\\uC774\\uB108\\uC5D0 \\uBAA8\\uB378\\uC744 \\uB4F1\\uB85D\\uD574\\uC57C\\uD55C\\uB2E4.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / ViewModels / Factories / SimpleTraderViewModelAbstractFactory.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"switch (viewType)\\n{\\n    case ViewType.Home:\\n        return _homeViewModelFactory.CreateViewModel();\\n    case ViewType.Portfolio:\\n        return _portfolioViewModelFactory.CreateViewModel();\\n        // \\uCD94\\uAC00\\n    case ViewType.Buy:\\n        return _buyViewModel;\\n    ...\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / App.xaml.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"...\\nservices.AddScoped<INavigator, Navigator>();\\nservices.AddScoped<MainViewModel>();\\n// \\uCD94\\uAC00\\nservices.AddScoped<BuyViewModel>();\\n...\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / ViewModels / Factories / RootSimpleTraderViewModelFactory.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"// \\uD30C\\uC77C\\uBA85 \\uBCC0\\uACBD : RootSimpleTraderViewModelFactory : IRootSimpleTraderViewModelFactory\\n\\npublic class RootSimpleTraderViewModelFactory : IRootSimpleTraderViewModelFactory\\n{\\n    private readonly ISimpleTraderViewModelFactory<HomeViewModel> \\n        _homeViewModelFactory;\\n    private readonly ISimpleTraderViewModelFactory<PortfolioViewModel> \\n        _portfolioViewModelFactory;\\n    private readonly BuyViewModel _buyViewModel;\\n\\n    public RootSimpleTraderViewModelFactory(\\n        ISimpleTraderViewModelFactory<HomeViewModel> homeViewModelFactory, \\n        ISimpleTraderViewModelFactory<PortfolioViewModel> portfolioViewModelFactory,\\n        BuyViewModel buyViewModel)\\n    {\\n        _homeViewModelFactory = homeViewModelFactory;\\n        _portfolioViewModelFactory = portfolioViewModelFactory;\\n        _buyViewModel = buyViewModel;\\n    }\\n\\n    public ViewModelBase CreateViewModel(ViewType viewType)\\n    {\\n        switch (viewType)\\n        {\\n            case ViewType.Home:\\n                return _homeViewModelFactory.CreateViewModel();\\n            case ViewType.Portfolio:\\n                return _portfolioViewModelFactory.CreateViewModel();\\n            case ViewType.Buy:\\n                return _buyViewModel;\\n            default:\\n                throw new ArgumentException(\\\"\\n                    The ViewType does not have a ViewModel.\\\", \\\"viewType\\\");\\n        }\\n    }\\n\")))), mdx(\"h1\", null), mdx(\"h3\", null, \"3. Add basic functionality to the BuyViewModel and BuyView\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / Views / BuyView.xaml\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"<Grid>\\n    <Grid.RowDefinitions>\\n        <RowDefinition Height=\\\"auto\\\" />\\n    </Grid.RowDefinitions>\\n\\n    <WrapPanel Grid.Row=\\\"0\\\" HorizontalAlignment=\\\"Center\\\">\\n        <TextBox Text=\\\"\\\" /> // BuyViewModel\\uC758 Symbol\\n        <Button Content=\\\"Search\\\" Command=\\\"\\\" />\\n    </WrapPanel>\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / ViewModels / BuyViewModel.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public class BuyViewModel : ViewModelBase\\n{\\n    private string _Symbol;\\n\\n    public string Symbol\\n    {\\n        get { return _Symbol; }\\n        set { _Symbol = value; OnPropertyChanged(nameof(Symbol)); }\\n    }\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / Views / BuyView.xaml\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"<Grid>\\n    <Grid.RowDefinitions>\\n        <RowDefinition Height=\\\"auto\\\" />\\n    </Grid.RowDefinitions>\\n\\n    <WrapPanel Grid.Row=\\\"0\\\" HorizontalAlignment=\\\"Center\\\">\\n        <TextBox Text=\\\"{Binding Symbol, UpdateSourceTrigger=PropertyChanged}\\\" />\\n        <Button Content=\\\"Search\\\" Command=\\\"SearchSymbolCommand\\\" /> \\n    </WrapPanel>\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / ViewModels / BuyViewModel.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public class BuyViewModel : ViewModelBase\\n{\\n    private string _Symbol;\\n\\n    public string Symbol\\n    {\\n        get { return _Symbol; }\\n        set { _Symbol = value; OnPropertyChanged(nameof(Symbol)); }\\n    }\\n\\n    public ICommand SearchSymbolCommand { get; set; }  // \\uCD94\\uAC00\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / Commands / SearchSymbolCommand.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public class SearchSymbolCommand : ICommand\\n{\\n    private readonly BuyViewModel _viewModel;\\n    private readonly IStockPriceService _stockPriceService;\\n\\n    public event EventHandler CanExecuteChanged;\\n\\n    public SearchSymbolCommand(BuyViewModel viewModel, \\n        IStockPriceService stockPriceService)\\n    {\\n        _viewModel = viewModel;\\n        _stockPriceService = stockPriceService;\\n    }\\n\\n    public bool CanExecute(object parameter)\\n    {\\n        return true;\\n    }\\n\\n    public async void Execute(object parameter)\\n    {\\n        try\\n        {\\n            double stockPrice = await _stockPriceService.GetPrice(_viewModel.Symbol);\\n            // so the command basically talks back and\\n            // forth between the view model\\n            _viewModel.StockPrice = stockPrice;  // BuyViewModel \\uCD94\\uAC00\\n        }\\n        catch (Exception e)\\n        {\\n            MessageBox.Show(e.Message);\\n        }\\n    }\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / ViewModels / BuyViewModel.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public class BuyViewModel : ViewModelBase\\n{\\n    private string _Symbol;\\n    public string Symbol\\n    {\\n        get { return _Symbol; }\\n        set { _Symbol = value; OnPropertyChanged(nameof(Symbol)); }\\n    }\\n\\n    // \\uCD94\\uAC00\\n    private double _stockPrice;\\n    public double StockPrice\\n    {\\n        get { return _stockPrice; }\\n        set { _stockPrice = value; OnPropertyChanged(nameof(StockPrice)); }\\n    }\\n\\n    public ICommand SearchSymbolCommand { get; set; }\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / ViewModels / BuyViewModel.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public class BuyViewModel : ViewModelBase\\n{\\n    private string _Symbol;\\n    public string Symbol\\n    {\\n        get { return _Symbol; }\\n        set { _Symbol = value; OnPropertyChanged(nameof(Symbol)); }\\n    }\\n\\n    // \\uCD94\\uAC00\\n    private double _stockPrice;\\n    public double StockPrice\\n    {\\n        get { return _stockPrice; }\\n        set { _stockPrice = value; OnPropertyChanged(nameof(StockPrice)); }\\n    }\\n\\n    public ICommand SearchSymbolCommand { get; set; } \\n\\n    public BuyViewModel(IStockPriceService stockPriceService)\\n    {\\n        SearchSymbolCommand = new SearchSymbolCommand(this, stockPriceService);\\n    }\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / Views / BuyView.xaml\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"<Grid Margin=\\\"20\\\"  HorizontalAlignment=\\\"Center\\\">\\n    <Grid.RowDefinitions>\\n        <RowDefinition Height=\\\"auto\\\" />\\n        <RowDefinition Height=\\\"*\\\" />\\n    </Grid.RowDefinitions>\\n\\n    <WrapPanel Grid.Row=\\\"0\\\" HorizontalAlignment=\\\"Center\\\">\\n        <TextBox Width=\\\"100\\\" Text=\\\"{Binding Symbol, \\n                UpdateSourceTrigger=PropertyChanged}\\\" />\\n        <Button Margin=\\\"10 0 0 0\\\" Content=\\\"Search\\\" \\n                Command=\\\"{Binding SearchSymbolCommand}\\\" />\\n    </WrapPanel>\\n\\n    <WrapPanel Margin=\\\"0 10 0 0\\\" Grid.Row=\\\"1\\\">\\n        <Border BorderBrush=\\\"Black\\\" BorderThickness=\\\"1\\\" Padding=\\\"20\\\">\\n            <StackPanel>\\n                <TextBlock HorizontalAlignment=\\\"Center\\\" \\n                            FontSize=\\\"32\\\" Text=\\\"{Binding Symbol}\\\"/>\\n                <TextBlock Margin=\\\"0 10 0 0\\\" \\n                            Text=\\\"{Binding StockPrice, StringFormat={}{0:C}}\\\" />\\n            </StackPanel>\\n        </Border>\\n        <Border BorderBrush=\\\"Black\\\" BorderThickness=\\\"1\\\" Padding=\\\"20\\\">\\n            <StackPanel>\\n                <WrapPanel Margin=\\\"0 10\\\">\\n                    <TextBlock Width=\\\"150\\\" Text=\\\"Shares To buy:\\\" />\\n                    <TextBox Width=\\\"50\\\" \\n                                Text=\\\"{Binding SharesToBuy, \\n                                        UpdateSourceTrigger=PropertyChanged}\\\" />\\n                </WrapPanel>\\n                <WrapPanel Margin=\\\"0 10\\\">\\n                    <TextBlock Width=\\\"150\\\" Text=\\\"Price per share:\\\" />\\n                    <TextBox Width=\\\"50\\\" \\n                                Text=\\\"{Binding StockPrice, \\n                                    StringFormat={}{0:C}}\\\" />\\n                </WrapPanel >\\n                <TextBlock HorizontalAlignment=\\\"Center\\\" \\n                            FontSize=\\\"32\\\" Margin=\\\"0 10\\\" \\n                            Text=\\\"{Binding TotalPrice, StringFormat={}{0:C}}\\\" />\\n                <Button Margin=\\\"0 10\\\" Content=\\\"Buy\\\" \\n                        Command=\\\"{Binding BuyStockCommand}\\\" />\\n            </StackPanel>\\n        </Border>\\n    </WrapPanel>\\n</Grid>\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / ViewModels / BuyViewModel.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public class BuyViewModel : ViewModelBase\\n{\\n    private string _Symbol;\\n\\n    public string Symbol\\n    {\\n        get { return _Symbol; }\\n        set { _Symbol = value; OnPropertyChanged(nameof(Symbol)); }\\n    }\\n\\n    private double _stockPrice;\\n\\n    public double StockPrice\\n    {\\n        get { return _stockPrice; }\\n        set { _stockPrice = value; OnPropertyChanged(nameof(StockPrice)); }\\n    }\\n\\n    private int _sharesToBuy;\\n\\n    public int SharesToBuy\\n    {\\n        get { return _sharesToBuy; }\\n        set \\n        { \\n            _sharesToBuy = value; \\n            OnPropertyChanged(nameof(SharesToBuy));\\n            OnPropertyChanged(nameof(TotalPrice));\\n        }\\n    }\\n\\n    public double TotalPrice\\n    {\\n        get\\n        {\\n            return SharesToBuy * StockPrice;\\n        }\\n    }\\n\\n    public ICommand SearchSymbolCommand { get; set; }\\n    public ICommand BuyStockCommand { get; set; }\\n\\n    public BuyViewModel(IStockPriceService stockPriceService,\\n        IBuyStockService buyStockService)\\n    {\\n        SearchSymbolCommand = new SearchSymbolCommand(this, stockPriceService);\\n        BuyStockCommand = new BuyStockCommand(this, buyStockService);\\n    }\\n\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SimpleTrader.WPF / Commands / BuyStockCommand.cs\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"public event EventHandler CanExecuteChanged;\\n\\n    private BuyViewModel _buyViewModel;\\n    private IBuyStockService _buyStockService;\\n\\n    public BuyStockCommand(BuyViewModel buyViewModel, IBuyStockService buyStockService)\\n    {\\n        _buyViewModel = buyViewModel;\\n        _buyStockService = buyStockService;\\n    }\\n\\n    public bool CanExecute(object parameter)\\n    {\\n        return true;\\n    }\\n\\n    public async void Execute(object parameter)\\n    {\\n        try\\n        {\\n            // in the future, we'll easily have an Account to sue here\\n            Account account = await _buyStockService.BuyStock(new Account()\\n            {\\n                Id = 1,\\n                Balance = 500,\\n                AssetTransactions = new List<AssetTransaction>()\\n            }, _buyViewModel.Symbol, _buyViewModel.SharesToBuy);\\n        }\\n        catch (Exception e)\\n        {\\n            MessageBox.Show(e.Message);\\n        }\\n    }\\n\")))));\n}\n;\nMDXContent.isMDXComponent = true;"}}},"staticQueryHashes":[]}