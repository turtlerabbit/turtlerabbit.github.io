---
title: Hot And Cold Observables
date: '2021-01-09 09'
tag: ReactiveX, tutorial, C#, HotAndColdObservables, publish(), refcount(), replay(), ConnectableObservable
---

1. we will look at how to describe and handle two styles of observable sequences:  
    - Cold : Sequences that are passive and start producing notifications on request (when subscribed to)
      - 수동적이고 요청시 알림 생성을 시작하는 시퀀스(구독시)
    - Hot : Sequences that are active and produce notifications regardless of subscriptions  
      - 구독에 관계없이 활성화되고 알림을 생성하는 시퀀스
#
2. Examples of hot observables that could publish regardless of whether there are any subscribers would be:  
    - mouse movements  
    - timer events  
    - broadcasts like ESB channels or UDP network packets.  
    - price ticks from a trading exchange  
#
3. Some examples of cold observables would be:  
    - asynchronous request (e.g. when using Observable.FromAsyncPattern)  
    - whenever Observable.Create is used  
    - subscriptions to queues  
    - on-demand sequences  
#
#### publish()  
  - 이 연산자는 보통의 Observable을 ConnectableObservable로 변환해 준다.  
#
#### ConnectableObservable  
  - ConnectableObservable은 Subscriber가 있어도 connect()를 호출하기 전까지는 아이템을 방출하지 않는다. connect()를 호출하고 나서야 아이템을 방출하기 시작한다.  
#
#### refcount()  
  - refcount() 는 ConnectableObservable에 Connect와 Disconnect를 자동으로 담당하고, ConnectableObservable을 보통의 Observable처럼 사용할 수 있게 해준다.  
  - make a Connectable Observable behave like an ordinary Observable
  - 다시말해 Subscription count를 계속 세고 있다가 Subscription의 개수가 0 -> 1 개가 되는 시점에 connect()를 수행하고 Subscription이 0이 되면 disconnect()를 수행한다.  
#
#### replay()  
  - replay() 연산자를 사용하여 이전 방출을 유지 한 다음 새 Observer가 스코프에 올 때 다시 방출 할 수 있다.  
  - ConnectableObservable을 반환하므로 방출을 멀티 캐스트하고 이전 항목도 방출한다.  
  - Observable이 항목을 방출하기 시작한 후에 구독하더라도 모든 관찰자가 방출 된 항목의 동일한 시퀀스를 볼 수 있도록한다.  
  - 연결 가능한 Observable로 변환하기 전에 Replay 연산자를 Observable에 적용하면 결과적으로 연결 가능한 Observable은 항상 동일한 완전한 시퀀스를 미래의 관찰자에게 방출한다.  
  - replay(1).refCount() keeps latest value in memory even after everyone unsubscribes  
#
[source](https://github.com/ledpink/ReactiveX/tree/main/HotAndColdObservables.Console4net5)
#
[참고 사이트](http://introtorx.com/Content/v1.0.10621.0/14_HotAndColdObservables.html#Replay)